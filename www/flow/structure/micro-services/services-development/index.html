<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Your Stack Your Way</title><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0"><link href="//fonts.googleapis.com/" rel="dns-prefetch"><link href="//fonts.googleapis.com/css?family=Droid+Serif:200,400,700,400italic" rel="stylesheet"><link href="/assets/css/main.css" rel="stylesheet" media="only all"><meta name="description"></head><body><div class="__page-container"><nav data-scroll-header="" data-js="trigger-overlay" id="trigger-overlay" class="SiteNav engineer engineer"><div class="SiteNav__bar"><a class="_SiteNav__logo SiteNav__a" href="/"><div class="LogoContainer"><?xml version="1.0" encoding="UTF-8" standalone="no"?><?xml-stylesheet href="../main.css" type="text/css"?><!DOCTYPE svg PUBLIC “-//W3C//DTD SVG 1.1//EN” “http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd”><svg viewbox="0 0 207 219" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns"><title>logo</title><description>dreamineering logo created with Sketch</description><defs></defs><g id="icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="256" transform="translate(-22.000000, -18.000000)" fill="#000000"><g id="logo" transform="translate(21.500000, 17.500000)"><path class="bd-logo-svg" d="M69.3045933,107.986937 L90.0502585,17.6043327 L0.660870037,17.6043327 L21.0954805,107.986937 L69.3045933,107.986937 Z M69.3045933,107.986937" id="dream"></path><path class="bd-logo-svg" d="M57.5705067,219.34676 L57.5705067,128.964156 L146.959895,174.155458 L57.5705067,219.34676 Z M57.5705067,219.34676" id="engine"></path><g id="reality" transform="translate(117.552961, 0.540079)"><path class="bd-logo-svg" d="M62.0906971,107.041504 C67.1464577,111.993692 69.6743002,118.115055 69.6743002,125.405775 C69.6743002,132.834057 67.1113488,139.196147 61.9853693,144.492237 C56.8593897,149.788327 50.6451104,152.436332 43.342345,152.436332 C36.1800174,152.436332 30.0710649,149.788327 25.0153043,144.492237 C19.9595436,139.196147 17.4317012,132.834057 17.4317012,125.405775 C17.4317012,117.977494 19.9244347,111.821742 24.9099764,106.938334 C29.8955182,102.054927 36.0395796,99.6132597 43.342345,99.6132597 C50.7855482,99.6132597 57.0349364,102.089316 62.0906971,107.041504 Z M62.0906971,107.041504" id="?"></path><path class="bd-logo-svg" d="M26.9075929,91.057101 L26.9075929,87.7258314 C26.9075929,82.0568004 27.5008197,77.4544345 28.6872911,73.9185956 C29.8737625,70.3827567 31.6399605,67.1537952 33.9859381,64.2316143 C36.3319157,61.3094333 41.6035449,56.1664721 49.8009838,48.8025761 C54.1693558,44.9452973 56.3535091,41.4095115 56.3535091,38.1951124 C56.3535091,34.9807134 55.4771513,32.4822862 53.7244094,30.6997559 C51.9716675,28.9172255 49.3156293,28.0259737 45.7562151,28.0259737 C41.9271482,28.0259737 38.7587777,29.3993781 36.2510086,32.1462282 C33.7432394,34.8930782 32.1388306,39.6853831 31.4377338,46.5232864 L0.0503286328,42.3153669 C1.12893902,29.8084326 5.32197398,19.7416703 12.6295593,12.1147781 C19.9371447,4.48788594 31.1410419,0.674497044 46.2415873,0.674497044 C57.9984405,0.674497044 67.4900695,3.33364179 74.716759,8.65201107 C84.5321135,15.8405761 89.4397171,25.4251858 89.4397171,37.4061275 C89.4397171,42.3738351 88.1723689,47.1661399 85.6376345,51.7831858 C83.1029001,56.4002316 77.925648,62.0399562 70.1057227,68.7025287 C64.6587403,73.3780182 61.2207212,77.1329643 59.7915625,79.9674798 C58.3624037,82.8019953 57.6478351,86.4984987 57.6478351,91.057101 L26.9075929,91.057101 Z M26.9075929,91.057101" id="?"></path></g></g></g></g></svg></div></a> <a class="_SiteNav__toggle toggle u-linkClean" href="#"><div class="toggle__patty"></div></a></div></nav><header class="u-z200 u-sizeFullHeight Banner engineer engineer" role="banner"><div class="u-pullBottom"><div class="_site-width"><div class="_copy-width"><h1>Development flow</h1></div></div></div><div class="u-bottomRight"><a class="u-linkClean" href="#content" data-scroll=""><i class="icon ion-chevron-down"></i></a></div></header><div id="content" class="__content-container"><div class="__content content" role="main"><section class="__section"><div class="_site-width "><div class="_copy-width _copy-- markdown"><h1 id="services">Services</h1><p>Right now there is only auth, but have started sketching out data layer for ecommerce as figure this is a well known domain to try with this idea.</p><p>The services stack consists of package json and common services where the StackMates are orchestrated into docker containers. That is the theory I don’t know if this how thing are done in practice.</p><h2 id="evolution-of-a-docker-container-service">Evolution of a docker container service</h2><p>app specfic modules =&gt; common services directory =&gt; remote docker container</p><p>Use gulp and docker for development to production workflow. In theory you can start with deploying a single app in one container then split apart as needed. But with docker <strong>Why not just deploy as containers from the start, then move containers?</strong> Lots of questions …</p><ul><li>Build config orchestrate code into services</li><li>Docker config</li><li>Hapi config as entry point</li></ul><h2 id="direction">Direction</h2><p>Showcase a real example of Microservice can be implemented by evaluating <a href="http://www.fig.sh/">fig</a>, <a href="https://github.com/kitematic/kitematic">kitematic</a>, <a href="http://panamax.io/">panamax.io</a> or <a href="https://www.tutum.co/">tutum.co</a> to help with going from a single app to breaking out services as demand requires.</p><p><a href="http://www.programmableweb.com/news/cope-create-once-publish-everywhere/2009/10/13">create once publish everywhere</a></p><h3 id="references">References</h3><p><a href="http://www.thoughtworks.com/insights/blog/rest-api-design-resource-modeling">Rest API Design - Thoughtworks</a><br><a href="http://javascriptjabber.com/104-jsj-hypermedia-apis-with-steve-klabnik/">Rest and Hypermedia - Steve Klabnik</a><br><a href="http://boundary.com/blog/2014/08/27/microservices-conways-law/">Microservices and conways law</a><br><a href="http://www.business2community.com/tech-gadgets/api-industry-predictions-2014-0714464#!bPEFva">API industry predictions</a></p><p><a href="http://blog.crowdint.com/2014/06/04/magmaconf-14-liveblogging-fred-george-enabling-emergent-technologies.html">Enabling emergent technologies</a></p><h3 id="talks">Talks</h3><p><a href="https://vimeo.com/user22258446/review/79288222/cbb24b224c">FG - while@outpace</a></p><ul><li><a href="http://hapijs.com/">Hapi</a> provides connection to customers</li><li><a href="http://senecajs.org/">Seneca</a> puts orders together and sources raw materials.</li><li><a href="https://www.docker.com/">Docker</a> puts transport infrastructure in place</li></ul><h2 id="principles">Principles</h2><ul><li>Publish conclusions, not raw data</li><li>Serves raise there hands if something goes wrong, self testing.</li><li>Montior business KPI’s over unit tests.</li><li>Don’t destroy data, as example do uppdate existing data but create new and validate by date (address)</li><li>Publish decisions</li></ul><h2 id="challenges">Challenges</h2><ul><li>Monitoring, logging is vital</li><li>Getting team to think how to decompose the problem</li></ul><h2 id="reporting">Reporting</h2><p>Use traditional sql for data warehouse</p><h2 id="services">Services</h2><p>This represents an effor to explain micro services and docker to a non technical person.</p><h3 id="substance">Substance</h3><p>Location - Western Australia</p><p>Dig raw material out of the ground (data sources) with small amount of refinement and filtering to export substance of what is needed to make into things</p><p>Use seneca data services to access any resource with a familiar api. Ideally sits over 1 - 3 tables max.</p><h4 id="remember">Remember</h4><ul><li>Don’t be concerned with referential integrity</li></ul><h3 id="structure">Structure</h3><p>Location - China</p><p>Take raw materials for all over and turn them into things.</p><p>Use seneca for business logic. Bit like the Dude’s rug this is where you bring it all together but unlike the Dude’s rug you can move you services across town and still tie the room together.</p><h3 id="connection">Connection</h3><p>Location - The Highstreet / ecommerce interface</p><p>Interface with the customer, provide a friendly user experience with help to find resources and messaging if items are unavailable</p><p>Use Hapi.js to bundle responses back to client with nice message and api docs etc supplied by Hapi.</p><h3 id="transportation">Transportation</h3><p>We need to be able to move our goods around and just as you choose between flight or float with seneca (MSA in general) you can go with http or something like zeroMQ or Kafka.</p><p>The analogy falls down here and becomes bit more like a bidding system in that when setting out of port a boat full of minerals would say ‘who wants this’ at which point any number of recievers can accept. Some for processing to for the client and others for auditing sake.</p><p>For business logic recivers ‘adding structure’ they are then effectively in a manufacturing race to fulfill the order with no guarantee their service will win the fulfillment.</p><p>more like a bid management system where each service sends out a signal saying ‘hey i’ve just this’ who wants it.</p><p>As there is no firm contracts to get responses one of the services has to pull out Fathers classic ‘Right we’re going without you’ after a short countdown.</p><h3 id="principles">Principles</h3><p>Track actions. Healthchecks or for mining for business intelligence later. These bus intell algoritms run ‘outside of the microservice theory’ in that the code could be large.</p><p>Efficient Algorithms require smart data aggregation services.</p><p>So microservices provide the OLTP whilst algorithm data comes from OLAP base which would be populated by other microservices.</p><h2 id="direction">Direction</h2><p>Provide a platform to allow module creators to explain their new ideas in the context of a larger system so the engineers on either side of the create / use divide to understand the why as well as how.</p><p>The preference for this setup versus what is demonstrated in the startupdeathclock is that for me at least it creates a firmer boundary of responsibilities between Seneca and Hapi. That being Seneca runs the internal data transportation, storage, and business logic whilst Hapi provides all the tools to interface a nice interface to the outside world with all it’s well thought out features, validation, logging interface testing etc.</p><p>Initially the seneca services are used as plugins but as need arose the the data and business logic services could split out without need for changing code and demonstrated <a href="https://github.com/rjrodger/startupdeathclock">startupdeathclock</a>.</p><p>The preference for this setup versus what is demonstrated in the startupdeathclock is that for me at least it creates a firmer boundary of responsibilities between Seneca and Hapi. That being Seneca runs the internal data transportation, storage, and business logic whilst Hapi provides all the tools to interface a nice interface to the outside world with all it’s well thought out features, validation, logging interface testing etc.</p><h3 id="goals">Goals</h3><p>Every request and action must be stored for varying purposes. Healthchecks or for mining for business intelligence later. These bus intell algoritms run ‘outside of the microservice theory’ in that the code could be large.</p><p>Efficient Algorithms require smart data aggregation services.</p><p>So microservices provide the OLTP whilst algorithm data comes from OLAP base which would be populated by other microservices.</p><h2 id="technologies">Technologies</h2><ul><li>Use <a href="http://dat-data.com/">dat</a> for sharing data?</li></ul><h2 id="questions">Questions</h2><p>Data warehouse is a pond, create a process to pump data into warehouse when events happens, listen to the message bus and store operational store is an event bus not a database</p><h2 id="cost">Cost</h2><ul><li>250 000 USD per year on Amazon ( client internal hardware costs ests at 5 to 10 time bigger )</li><li>Run on micro services around 40 usd per month.</li><li>Enabled by cloud</li></ul><h2 id="tools-and-solutions">Tools and Solutions</h2><ul><li>ZeroMQ</li><li>Clojure</li></ul><h2 id="research">Research</h2><ul><li><a href="http://www.thoughtworks.com/insights/blog/rest-api-design-resource-modeling">Rest API Design</a></li><li><a href="http://javascriptjabber.com/104-jsj-hypermedia-apis-with-steve-klabnik/">Listen to Steve Klabnik</a></li><li><a href="http://boundary.com/blog/2014/08/27/microservices-conways-law/">microservices and conways law</a></li></ul></div></div></section></div></div><div data-js="SiteNavOverlay" class="SiteNavOverlay SiteNavOverlay--drmg"><nav class="SiteNavOverlay-nav"><ul><li><a class="u-linkClean" href="/values">Values</a></li><li><a class="u-linkClean" href="/archetypes">Archetypes</a></li><li><a class="u-linkClean" href="/flow">Flow</a></li><li><a class="u-linkClean" href="/engineer">Stack</a></li></ul></nav></div><footer data-js="footer" class="__Pagefooter Pagefooter" role="contentinfo"><div class="u-cf u-paletteBody"><div class="_site-width"><p class="u-marginAn u-paddingAl">&copy; 2014 stackmates <span class="u-hidden"><span class="g-plusone" data-annotation="none"></span></span></p></div></div></footer></div><script src="/assets/js/app.js"></script><script type="text/javascript">
      (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/platform.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script><script>
       // ensure all non-essential stuff is loaded after window.load
        // http://www.feedthebot.com/pagespeed/defer-loading-javascript.html
        if (window.addEventListener)
          window.addEventListener("load", afterWindowLoad, false);
        else if (window.attachEvent)
          window.attachEvent("onload", afterWindowLoad);
        else
          window.onload = afterWindowLoad;
    
        function afterWindowLoad() {
        }
    
    </script></body></html>